<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Monitoring | YourSolar</title>
    <link rel="stylesheet" href="css/globals.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="dashboard">
      <div class="div">
        <div class="sidebar">
          <div class="logo">
            <a href="index.html">
              <div class="logo-content">
                <i class="fas fa-solar-panel"></i>
                <span>YourSolar</span>
              </div>
            </a>
          </div>
          <div class="menu">
            <a href="dashboard.html" class="menu-item">
              <i class="fas fa-tachometer-alt"></i>
              <span>Dashboard</span>
            </a>
            <a href="energy.html" class="menu-item active">
              <i class="fas fa-bolt"></i>
              <span>Energy</span>
            </a>
            <a href="battery.html" class="menu-item">
              <i class="fas fa-battery-full"></i>
              <span>Battery</span>
            </a>
            <a href="weather.html" class="menu-item">
              <i class="fas fa-cloud-sun"></i>
              <span>Weather</span>
            </a>
            <a href="profile.html" class="menu-item">
              <i class="fas fa-user"></i>
              <span>Profile</span>
            </a>
            <a href="settings.html" class="menu-item">
              <i class="fas fa-cog"></i>
              <span>Settings</span>
            </a>
          </div>
        </div>

        <div class="main-content">
          <div class="header">
            <div class="page-title">
              <h1>Energy Monitoring</h1>
              <p>Track and analyze your solar energy production and consumption</p>
            </div>
            <div class="user-menu">
              <div class="status">
                <div class="status-indicator online"></div>
                <span>Status: Connected</span>
              </div>
              <div class="user-profile">
                <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User Profile" />
                <div class="dropdown">
                  <i class="fas fa-chevron-down"></i>
                </div>
              </div>
            </div>
          </div>

          <div class="energy-dashboard-grid">
            <div class="card energy-overview">
              <div class="card-header">
                <h2>Energy Overview</h2>
                <div class="period-selector">
                  <span>Day</span>
                  <span>Week</span>
                  <span class="active">Month</span>
                  <span>Year</span>
                </div>
              </div>
              <div class="card-content">
                <div class="energy-metrics">
                  <div class="metric-item">
                    <div class="metric-icon generation">
                      <i class="fas fa-solar-panel"></i>
                    </div>
                    <div class="metric-details">
                      <span class="metric-label">Generation</span>
                      <span class="metric-value">1,245 kWh</span>
                      <span class="metric-trend positive">+15% vs. last month</span>
                    </div>
                  </div>
                  <div class="metric-item">
                    <div class="metric-icon consumption">
                      <i class="fas fa-bolt"></i>
                    </div>
                    <div class="metric-details">
                      <span class="metric-label">Consumption</span>
                      <span class="metric-value">987 kWh</span>
                      <span class="metric-trend positive">-8% vs. last month</span>
                    </div>
                  </div>
                  <div class="metric-item">
                    <div class="metric-icon export">
                      <i class="fas fa-upload"></i>
                    </div>
                    <div class="metric-details">
                      <span class="metric-label">Grid Export</span>
                      <span class="metric-value">258 kWh</span>
                      <span class="metric-trend positive">+22% vs. last month</span>
                    </div>
                  </div>
                </div>
                <div class="energy-chart-container">
                  <canvas id="energyOverviewChart"></canvas>
                </div>
              </div>
            </div>

            <div class="card daily-production">
              <div class="card-header">
                <h2>Daily Production</h2>
                <div class="period-selector">
                  <span>Week</span>
                  <span class="active">Month</span>
                </div>
              </div>
              <div class="card-content">
                <div class="daily-chart-container">
                  <canvas id="dailyProductionChart"></canvas>
                </div>
                <div class="production-stats">
                  <div class="stat-item">
                    <span class="stat-label">Highest Day</span>
                    <span class="stat-value">58.2 kWh</span>
                    <span class="stat-date">May 15, 2023</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Lowest Day</span>
                    <span class="stat-value">21.6 kWh</span>
                    <span class="stat-date">May 28, 2023</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Daily Average</span>
                    <span class="stat-value">41.5 kWh</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="card hourly-production">
              <div class="card-header">
                <h2>Hourly Production Today</h2>
                <div class="date-display">
                  <i class="fas fa-calendar-day"></i>
                  <span>June 5, 2023</span>
                </div>
              </div>
              <div class="card-content">
                <div class="hourly-chart-container">
                  <canvas id="hourlyProductionChart"></canvas>
                </div>
                <div class="hourly-stats">
                  <div class="stat-item">
                    <span class="stat-label">Peak Production</span>
                    <span class="stat-value">5.8 kW</span>
                    <span class="stat-time">12:30 PM</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Total Today</span>
                    <span class="stat-value">38.7 kWh</span>
                    <span class="stat-progress">81% of daily average</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="card consumption-analysis">
              <div class="card-header">
                <h2>Consumption Analysis</h2>
                <div class="period-selector">
                  <span>Day</span>
                  <span class="active">Week</span>
                  <span>Month</span>
                </div>
              </div>
              <div class="card-content">
                <div class="consumption-chart-container">
                  <canvas id="consumptionAnalysisChart"></canvas>
                </div>
                <div class="consumption-breakdown">
                  <h3>Energy Usage Breakdown</h3>
                  <div class="breakdown-items">
                    <div class="breakdown-item">
                      <div class="color-indicator" style="background-color: #ffc107;"></div>
                      <span class="breakdown-label">HVAC</span>
                      <div class="breakdown-bar">
                        <div class="breakdown-progress" style="width: 35%;"></div>
                      </div>
                      <span class="breakdown-percentage">35%</span>
                    </div>
                    <div class="breakdown-item">
                      <div class="color-indicator" style="background-color: #2196f3;"></div>
                      <span class="breakdown-label">Appliances</span>
                      <div class="breakdown-bar">
                        <div class="breakdown-progress" style="width: 25%;"></div>
                      </div>
                      <span class="breakdown-percentage">25%</span>
                    </div>
                    <div class="breakdown-item">
                      <div class="color-indicator" style="background-color: #4caf50;"></div>
                      <span class="breakdown-label">Lighting</span>
                      <div class="breakdown-bar">
                        <div class="breakdown-progress" style="width: 15%;"></div>
                      </div>
                      <span class="breakdown-percentage">15%</span>
                    </div>
                    <div class="breakdown-item">
                      <div class="color-indicator" style="background-color: #9c27b0;"></div>
                      <span class="breakdown-label">Electronics</span>
                      <div class="breakdown-bar">
                        <div class="breakdown-progress" style="width: 20%;"></div>
                      </div>
                      <span class="breakdown-percentage">20%</span>
                    </div>
                    <div class="breakdown-item">
                      <div class="color-indicator" style="background-color: #ff5722;"></div>
                      <span class="breakdown-label">Other</span>
                      <div class="breakdown-bar">
                        <div class="breakdown-progress" style="width: 5%;"></div>
                      </div>
                      <span class="breakdown-percentage">5%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card energy-comparison">
              <div class="card-header">
                <h2>Energy Comparison</h2>
                <div class="comparison-toggle">
                  <span class="active">Monthly</span>
                  <span>Seasonal</span>
                </div>
              </div>
              <div class="card-content">
                <div class="comparison-chart-container">
                  <canvas id="energyComparisonChart"></canvas>
                </div>
                <div class="comparison-insights">
                  <div class="insight-item">
                    <i class="fas fa-lightbulb"></i>
                    <div class="insight-content">
                      <h4>Production Peak</h4>
                      <p>Your highest production month was <strong>May</strong> with 1,245 kWh generated.</p>
                    </div>
                  </div>
                  <div class="insight-item">
                    <i class="fas fa-chart-line"></i>
                    <div class="insight-content">
                      <h4>Efficiency Trend</h4>
                      <p>Your system efficiency has <strong>increased by 8%</strong> compared to the same period last year.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card energy-bills">
              <div class="card-header">
                <h2>Energy Bills & Savings</h2>
                <div class="period-selector">
                  <span>3 Months</span>
                  <span class="active">6 Months</span>
                  <span>1 Year</span>
                </div>
              </div>
              <div class="card-content">
                <div class="savings-chart-container">
                  <canvas id="energySavingsChart"></canvas>
                </div>
                <div class="savings-summary">
                  <div class="summary-item">
                    <div class="summary-icon">
                      <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="summary-details">
                      <h4>Total Savings</h4>
                      <p>NPR 28,560 saved in the last 6 months</p>
                    </div>
                  </div>
                  <div class="summary-item">
                    <div class="summary-icon">
                      <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div class="summary-details">
                      <h4>Average Monthly Savings</h4>
                      <p>NPR 4,760 per month</p>
                    </div>
                  </div>
                  <div class="summary-item">
                    <div class="summary-icon">
                      <i class="fas fa-leaf"></i>
                    </div>
                    <div class="summary-details">
                      <h4>Carbon Offset</h4>
                      <p>2.8 tons of CO2 emissions avoided</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Energy Overview Chart
        const energyOverviewCtx = document.getElementById('energyOverviewChart').getContext('2d');
        const energyOverviewChart = new Chart(energyOverviewCtx, {
          type: 'line',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            datasets: [
              {
                label: 'Generation (kWh)',
                data: [850, 920, 1050, 1180, 1245, 1300, 1280, 1190, 1100, 980, 890, 820],
                borderColor: '#ffc107',
                backgroundColor: 'rgba(255, 193, 7, 0.1)',
                tension: 0.4,
                fill: true
              },
              {
                label: 'Consumption (kWh)',
                data: [920, 980, 930, 950, 987, 1020, 1100, 1050, 980, 920, 890, 950],
                borderColor: '#2196f3',
                backgroundColor: 'rgba(33, 150, 243, 0.1)',
                tension: 0.4,
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: 'top',
              }
            },
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });

        // Daily Production Chart
        const dailyProductionCtx = document.getElementById('dailyProductionChart').getContext('2d');
        const dailyProductionChart = new Chart(dailyProductionCtx, {
          type: 'bar',
          data: {
            labels: [...Array(31).keys()].map(day => `${day + 1}`),
            datasets: [
              {
                label: 'Daily Production (kWh)',
                data: [
                  45.2, 43.8, 47.1, 38.6, 51.2, 49.8, 47.5, 
                  39.2, 42.1, 45.6, 47.8, 48.2, 50.5, 52.8, 
                  58.2, 55.1, 49.2, 47.5, 45.8, 43.2, 39.5, 
                  41.8, 43.5, 45.2, 39.8, 34.5, 28.6, 21.6, 
                  35.2, 38.5, 42.1
                ],
                backgroundColor: '#ffc107'
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: 'Energy (kWh)'
                }
              },
              x: {
                title: {
                  display: true,
                  text: 'Day of Month'
                }
              }
            }
          }
        });

        // Hourly Production Chart
        const hourlyProductionCtx = document.getElementById('hourlyProductionChart').getContext('2d');
        const hourlyProductionChart = new Chart(hourlyProductionCtx, {
          type: 'line',
          data: {
            labels: ['6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM'],
            datasets: [
              {
                label: 'Power Output (kW)',
                data: [0.5, 1.2, 2.8, 3.9, 4.7, 5.3, 5.8, 5.6, 5.4, 4.9, 4.2, 3.1, 1.8, 0.8, 0.2],
                borderColor: '#ffc107',
                backgroundColor: 'rgba(255, 193, 7, 0.1)',
                tension: 0.4,
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: 'Power (kW)'
                }
              }
            }
          }
        });

        // Consumption Analysis Chart
        const consumptionAnalysisCtx = document.getElementById('consumptionAnalysisChart').getContext('2d');
        const consumptionAnalysisChart = new Chart(consumptionAnalysisCtx, {
          type: 'line',
          data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [
              {
                label: 'Solar Energy Used (kWh)',
                data: [18, 22, 19, 23, 20, 25, 21],
                borderColor: '#4caf50',
                backgroundColor: 'rgba(76, 175, 80, 0.1)',
                tension: 0.4,
                fill: true
              },
              {
                label: 'Grid Energy Used (kWh)',
                data: [12, 8, 10, 7, 11, 5, 9],
                borderColor: '#f44336',
                backgroundColor: 'rgba(244, 67, 54, 0.1)',
                tension: 0.4,
                fill: true
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: 'top',
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                stacked: true
              }
            }
          }
        });

        // Energy Comparison Chart
        const energyComparisonCtx = document.getElementById('energyComparisonChart').getContext('2d');
        const energyComparisonChart = new Chart(energyComparisonCtx, {
          type: 'bar',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [
              {
                label: 'This Year (kWh)',
                data: [850, 920, 1050, 1180, 1245, 1300],
                backgroundColor: '#2196f3'
              },
              {
                label: 'Last Year (kWh)',
                data: [780, 850, 970, 1090, 1150, 1210],
                backgroundColor: '#9e9e9e'
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: 'top',
              }
            },
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });

        // Energy Savings Chart
        const energySavingsCtx = document.getElementById('energySavingsChart').getContext('2d');
        const energySavingsChart = new Chart(energySavingsCtx, {
          type: 'bar',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [
              {
                label: 'Bill without Solar (NPR)',
                data: [9500, 9800, 10200, 10500, 11000, 11500],
                backgroundColor: '#f44336'
              },
              {
                label: 'Bill with Solar (NPR)',
                data: [5600, 5200, 4800, 4500, 4100, 3800],
                backgroundColor: '#4caf50'
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: 'top',
              }
            },
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
      });
    </script>
  </body>
</html>
